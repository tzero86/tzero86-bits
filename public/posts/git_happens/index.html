<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Tzero86@trojanwave/posts/git_happens/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://tzero86bits.tk/hugo-theme-console/css/terminal-0.7.1.min.css">
    <link rel="stylesheet" href="https://tzero86bits.tk/hugo-theme-console/css/animate-3.7.2.min.css">
    <link rel="stylesheet" href="https://tzero86bits.tk/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="Git_happens" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tzero86bits.tk/posts/git_happens/" /><meta property="article:published_time" content="2020-10-08T21:39:14-04:00" />



<meta name="twitter:title" content="Git_happens"/>
<meta name="twitter:description" content="Boss wanted me to create a prototype, so here it is! We even used something called &lsquo;version control&rsquo; that made deploying this really easy!"/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://tzero86bits.tk/" class="no-style site-name">Tzero86@trojanwave</a>:~# 
              <a href='https://tzero86bits.tk/posts'>posts</a>/<a href='https://tzero86bits.tk/posts/git_happens'>git_happens</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="https://tzero86bits.tk/about/" typeof="ListItem">about/</a></li>
                
                <li><a href="https://tzero86bits.tk/posts/" typeof="ListItem">posts/</a></li>
                
                <li><a href="https://tzero86bits.tk/photos/" typeof="ListItem">photos/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h1>Git_happens</h1>
Oct. 8, 2020


<br/><br/>
<img src="../img/git_happens_cover.gif" alt="Post Cover Gif animation";>
<br/><br/>
<h2 id="res---thm-room">Res - THM Room</h2>
<p>Howdy! Welcome to <code>Git Happens</code> write-up. Let&rsquo;s see how we can compromise this room. I hope you enjoy it!</p>
<ul>
<li>Please visit This room on TryHackMe by <a href="https://tryhackme.com/room/githappens">clicking this link</a>.</li>
<li><strong>PLEASE NOTE:</strong> Passwords, flag values, or any kind of answers to the room questions were intentionally masked as required by THM writeups rules.</li>
</ul>
<h3 id="scanning-the-machine">Scanning the machine</h3>
<p>I start with <code>Autorecon</code> once again (referring to my last writeup). While it runs, let&rsquo;s check if we have any webpage or app being served at the IP address of the target machine.</p>
<p>We do get a login form.</p>
<p><img src="https://i.imgur.com/ujNWDPy.png" alt="Login form"></p>
<p>Let&rsquo;s run <code>gobuster</code> as well.</p>
<p><img src="https://i.imgur.com/yxpMN02.png" alt="We run goBuster and Autorecon"></p>
<p>While these two are working, let&rsquo;s see if we can find some information about git, since this room seems dedicated or based on it.</p>
<p>It is not crazy to assume this machine could have a git repository.</p>
<p>Turns out pubicly hosting your repository on a production website, by just cloning the repo, seems to be quite a bad idea. Long story short it seems git and other version control systems create a folder with a <code>copy</code> of the repository fo tracking. Meaning we can get full access to the code repository if the admin is not restricting access to that location.</p>
<blockquote>
<p>If this seems interesting, I suggest reading <a href="https://en.internetwache.org/dont-publicly-expose-git-or-how-we-downloaded-your-websites-sourcecode-an-analysis-of-alexas-1m-28-07-2015/">this</a> article I consulted.</p>
</blockquote>
<p>So let&rsquo;s see if we have access to a possible repository at <code>/.git</code> location:</p>
<p><img src="https://i.imgur.com/nMOPNSq.png" alt="We do have access!"></p>
<p>Ok so far so good. Let&rsquo;s see what we can find by looking around the repo a bit. Mmm it seems we cannot just browse around this repo, since any link I click is downloading a file (that we can read though).</p>
<p>The same article I pointed out earlier gives us a guide on what to try and do next. We need to try to download that repository so we can get our hands on it in a practical way.</p>
<p>Seems we can just use <code>wget</code> to get us a local copy of that repository. Let&rsquo;s see how we do that:</p>
<p><code>wget --mirror -I .git {TARGET_IP}/.git/</code></p>
<p>Let&rsquo;s run that:</p>
<p><img src="https://i.imgur.com/3akX2gJ.png" alt="We start to download a copy of the repo"></p>
<p>If we navigate into the <code>cloned</code> repository in our local machine, now we can see all the information and browse around without issues:</p>
<p><img src="https://i.imgur.com/4Fl4oF0.png" alt="the copied repository folders"></p>
<p>I think we just probably need to browse around for the <code>supersecret password</code> to solve the room. Let&rsquo;s give it a go then.</p>
<p>We can do a <code>git status</code> and we see some files were removed and can be recovered thanks to git version control.</p>
<p><img src="https://i.imgur.com/dOJM1v9.png" alt="We can see deleted files in the repository and restore them"></p>
<h3 id="lets-compromise-this-repository">Let&rsquo;s compromise this repository</h3>
<p>At this point we can keep manually looking for some clues or the supersecret key. But we need to do this in a better way, let&rsquo;s google a bit and see if we can use any tool to scan repositories for keys, hashes, etc.</p>
<p>I found <a href="https://geekflare.com/github-credentials-scanner/">this</a> site that lists some tools that we can try out. As you might have noticed, I don&rsquo;t know yet how to exploit this room either. :laughing:</p>
<p>From the list two tools stand out to me, <code>Git Hound</code> and <code>Truffle Hog</code> I&rsquo;ve seen mentioned around in some streams and videos but never really used them before.</p>
<p>I decided to try the <code>Truffle Hog</code>.</p>
<p>We run <code>pip install truffleHog</code> to install it, it seems.</p>
<p>Running it like this <code>trufflehog /Directory/.git</code> quickly returns quite a lot of results. Including a very interesting commit where a hash, username and algorithm used are mentioned:</p>
<p><img src="https://i.imgur.com/fniRgDE.png" alt="Intersting results"></p>
<p>However at this <code>commit</code> in time, the password is already hashed. Let&rsquo;s see if we can find an older one.</p>
<p>There seems to be one that could be useful:</p>
<p><img src="https://i.imgur.com/eOFL3CV.png" alt=""></p>
<p>Even though that commit is about a CSS file, we can assume it was styling the page we want to look into.</p>
<p>Let&rsquo;s <code>show</code> that commit by running <code>git show {Commit_hash_id}</code>. If you noticed each commit has this hash unique id.</p>
<p><img src="https://i.imgur.com/1XrfFqr.png" alt="we get the flag"></p>
<p>That&rsquo;s it if we look through that commit we can see the code where the password was hashed (in a later commit) it is unhashed in this one.</p>
<p>That&rsquo;s our flag!</p>
<p>That&rsquo;s it, I really hope you enjoyed this room like I did. Please leave a comment if you liked this writeup, or hated it. Or even if you ended up here by pure accident!</p>
<p>Happy hacking and thanks for stopping by!</p>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<br>
<div class="container center" style="margin:10px !important;  text-align: center!important">
    <div class="center">
        <script src="https://tryhackme.com/badge/71634"></script>
    </div>
    <div class="center">
        <a href="https://twitter.com/Tzero86" target="_blank" class="fa fa-twitter" style="text-decoration: none !important;  font-size: 30px; padding: 5px"></a>
        <a href="https://github.com/Tzero86" target="_blank" class="fa fa-github" style="text-decoration: none !important;  font-size: 30px; padding: 5px"></a> 
        <a href="https://www.linkedin.com/in/ermedina86/" target="_blank" class="fa fa-linkedin" style="text-decoration: none !important;  font-size: 30px; padding: 5px"></a> 
        <br> 
    </div>
</div>



        <div class="footer">
    Made with <a href="https://gohugo.io/">Hugo</a> with
    <a href="https://github.com/mrmierzejewski/hugo-theme-console/">Console Theme</a>. 
</div>

    </div>
  </body>
</html>
